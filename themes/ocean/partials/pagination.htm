{% set current = pager.current %}
{% set last = pager.last %}

{% if last > 1 %}
  <nav aria-label="Pagination">
    <ul class="pagination pagination-sm mb-0">
      {% set prev = current - 1 %}
      {% set next = current + 1 %}

      <li class="page-item {% if current <= 1 %}disabled{% endif %}">
        <a class="page-link" href="?q={{ filters.q|url_encode }}&status={{ filters.status }}&page={{ prev }}">Prev</a>
      </li>

      {% for p in 1..last %}
        {% if p == 1 or p == last or (p >= current - 2 and p <= current + 2) %}
          <li class="page-item {% if p == current %}active{% endif %}">
            <a class="page-link" href="?q={{ filters.q|url_encode }}&status={{ filters.status }}&page={{ p }}">{{ p }}</a>
          </li>
        {% elseif p == current - 3 or p == current + 3 %}
          <li class="page-item disabled"><span class="page-link">â€¦</span></li>
        {% endif %}
      {% endfor %}

      <li class="page-item {% if current >= last %}disabled{% endif %}">
        <a class="page-link" href="?q={{ filters.q|url_encode }}&status={{ filters.status }}&page={{ next }}">Next</a>
      </li>
    </ul>
  </nav>
{% endif %}
