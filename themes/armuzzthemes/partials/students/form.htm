{% set isEdit = (mode == 'edit') %}

<div class="card shadow-sm mt-4">
  <div class="card-body">
    <form data-request="onSave" data-request-validate data-request-flash>
      {{ form_token() }}

      {% if errors and errors.any %}
        <div class="alert alert-danger" data-i18n="check_input">
          Periksa kembali input kamu.
        </div>
      {% endif %}

      <div class="mb-3">
        <label class="form-label" data-i18n="lbl_name">Name</label>
        <input
          name="name"
          class="form-control {% if errors and errors.has('name') %}is-invalid{% endif %}"
          value="{{ post('name') ? post('name') : (student ? student.name : '') }}"
          placeholder="Nama siswa"
          data-i18n="ph_student_name"
          autofocus
        >
        {% if errors and errors.has('name') %}
          <div class="invalid-feedback">{{ errors.first('name') }}</div>
        {% endif %}
      </div>

      <div class="mb-3">
        <label class="form-label" data-i18n="lbl_subject">Subject</label>
        <input
          name="subject"
          class="form-control {% if errors and errors.has('subject') %}is-invalid{% endif %}"
          value="{{ post('subject') ? post('subject') : (student ? student.subject : '') }}"
          placeholder="Mata pelajaran / bidang"
          data-i18n="ph_subject"
        >
        {% if errors and errors.has('subject') %}
          <div class="invalid-feedback">{{ errors.first('subject') }}</div>
        {% endif %}
      </div>

      {% set activeChecked = student and student.is_active ? true : false %}
      {% if post('name') is not null or post('subject') is not null %}
        {% set activeChecked = post('is_active') ? true : false %}
      {% endif %}

      <div class="form-check mb-4">
        <input class="form-check-input" type="checkbox" value="1" id="isActive" name="is_active" {% if activeChecked %}checked{% endif %}>
        <label class="form-check-label" for="isActive" data-i18n="lbl_active">Active</label>
      </div>

      <div class="d-flex gap-2">
        <button class="btn btn-primary" type="submit">
          <i class="bi bi-save me-1"></i> <span data-i18n="btn_save">Save</span>
        </button>
        <a class="btn btn-outline-secondary" href="{{ 'students'|page }}"><span data-i18n="cancel">Cancel</span></a>
        {% if isEdit and student %}
          <a class="btn btn-outline-secondary ms-auto" href="{{ 'students_edit'|page({ id: student.id }) }}">
            <span data-i18n="refresh">Refresh</span>
          </a>
        {% endif %}
      </div>
    </form>
  </div>
</div>