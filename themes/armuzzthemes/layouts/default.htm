<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ this.page.title }} | ArmuzzThemes</title>

    <!-- Bootstrap 5.3 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <!-- Theme System -->
    <link rel="stylesheet" href="{{ 'assets/css/themes.css'|theme }}?v=2.5">

    {% styles %}

    <style>
      .preload-transitions * {
        transition: none !important;
      }
    </style>
    <!-- Prevent FOUC: apply saved theme before render -->
    <script>
      (function() {
        var t = localStorage.getItem('armuzz-theme') || 'default';
        document.documentElement.setAttribute('data-theme', t);
        document.documentElement.classList.add('preload-transitions');
      })();
    </script>
</head>
<body>
  <script>
    document.body.setAttribute('data-theme', localStorage.getItem('armuzz-theme') || 'default');
  </script>

  {% partial 'watermark' %}

  <div class="app-wrapper">
    {% partial 'sidebar' %}

    <div class="main-area">
      <!-- Topbar -->
      {% partial 'topbar' %}

      <!-- Main Content -->
      <main class="main-content">
        {% partial 'flash' %}
        {% page %}
      </main>

      <!-- Footer -->
      {% partial 'footer' %}
    </div>
  </div>

  <!-- Modals -->
  {% partial 'theme-switcher' %}
  {% partial 'lang-switcher' %}
  {% partial 'tz-switcher' %}

  <!-- Core Scripts -->
  <script src="{{ 'assets/js/lang.js'|theme }}?v=2.5"></script>
  <script>
    // Apply lang immediately to prevent text glitch (FOUC)
    if (typeof applyLang === 'function') {
      applyLang(localStorage.getItem('armuzz-lang') || 'en');
    }
  </script>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  
  {% framework extras %}
  {% scripts %}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{{ 'assets/js/app.js'|theme }}?v=2.5"></script>

</body>
</html>